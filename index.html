<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Payjoy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            animation: fadeIn 1s ease-in-out;
        }

        /* Animação de entrada suave */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Classes para transições e sombras aprimoradas */
        .card-shadow {
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2), 0 6px 6px rgba(0, 0, 0, 0.23);
        }
        .input-focus:focus {
            box-shadow: 0 0 0 3px rgba(52, 211, 153, 0.5);
        }
        .btn-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="bg-gray-800 p-8 md:p-12 rounded-2xl card-shadow flex flex-col items-center max-w-lg w-full transition-all duration-300">
        <!-- Título -->
        <h1 class="text-3xl md:text-4xl font-bold text-center text-teal-400 mb-6 transition-all duration-300">Calculadora Payjoy</h1>
        
        <!-- Descrição -->
        <p class="text-center mb-8 text-gray-300">
            Calcule o valor que a Loja irá receber
        </p>

        <!-- Campo para Valor Total Financiado Payjoy -->
        <div class="w-full mb-6">
            <label for="financedValue" class="block text-sm font-medium text-gray-400 mb-2">Valor Total Financiado Payjoy</label>
            <input type="text" id="financedValue" placeholder="valor total digitado no sistema da Payjoy"
                   class="w-full p-3 rounded-xl bg-gray-700 border border-gray-600 text-gray-50 focus:outline-none focus:ring-2 focus:ring-teal-500 transition-colors duration-200">
        </div>

        <!-- Campo para Entrada pedida no sistema -->
        <div class="w-full mb-6">
            <label for="downPayment" class="block text-sm font-medium text-gray-400 mb-2">Entrada pedida no sistema</label>
            <input type="text" id="downPayment" placeholder="valor do sistema da Payjoy"
                   class="w-full p-3 rounded-xl bg-gray-700 border border-gray-600 text-gray-50 focus:outline-none focus:ring-2 focus:ring-teal-500 transition-colors duration-200">
        </div>
        
        <!-- Campo para Valor real da entrada Pago pelo Cliente -->
        <div class="w-full mb-8">
            <label for="customerPaidValue" class="block text-sm font-medium text-gray-400 mb-2">Valor real da entrada Pago pelo Cliente</label>
            <input type="text" id="customerPaidValue" placeholder="valor real recebido do cliente"
                   class="w-full p-3 rounded-xl bg-gray-700 border border-gray-600 text-gray-50 focus:outline-none focus:ring-2 focus:ring-teal-500 transition-colors duration-200">
        </div>

        <!-- Botão para Limpar -->
        <button id="clearButton"
                class="w-full bg-red-500 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-red-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-800">
            Limpar
        </button>

        <!-- Resultado -->
        <div id="result" class="mt-8 text-center">
            <!-- Os elementos do resultado serão inseridos aqui via JavaScript -->
        </div>
    </div>

    <script>
        // Adiciona event listeners para os campos de input, para que a calculadora seja em tempo real
        document.addEventListener('DOMContentLoaded', () => {
            const financedValueInput = document.getElementById('financedValue');
            const downPaymentInput = document.getElementById('downPayment');
            const customerPaidValueInput = document.getElementById('customerPaidValue');
            const clearButton = document.getElementById('clearButton');

            // Adiciona um event listener para cada campo para calcular em tempo real
            financedValueInput.addEventListener('input', calculate);
            downPaymentInput.addEventListener('input', calculate);
            customerPaidValueInput.addEventListener('input', calculate);

            // Adiciona um event listener para o botão de limpar
            clearButton.addEventListener('click', clearInputs);

            // Realiza um cálculo inicial caso existam valores pré-preenchidos
            calculate();
        });

        function calculate() {
            const financedValueInput = document.getElementById('financedValue');
            const downPaymentInput = document.getElementById('downPayment');
            const customerPaidValueInput = document.getElementById('customerPaidValue');
            const resultDiv = document.getElementById('result');

            // Substitui a vírgula por ponto para o cálculo
            const financedValue = parseFloat(financedValueInput.value.replace(',', '.'));
            const downPayment = parseFloat(downPaymentInput.value.replace(',', '.')) || 0;
            const customerPaidValue = parseFloat(customerPaidValueInput.value.replace(',', '.')) || 0;

            // Limpa o conteúdo do resultado antes de exibir o novo
            resultDiv.innerHTML = '';

            // Verifica se os valores são números válidos
            if (isNaN(financedValue) || isNaN(downPayment) || isNaN(customerPaidValue) || financedValue < 0 || downPayment < 0 || customerPaidValue < 0) {
                resultDiv.innerHTML = '<span class="text-red-400 text-lg md:text-xl font-bold">Por favor, insira valores válidos.</span>';
                return;
            }

            // Realiza o cálculo
            const remainingValue = financedValue - downPayment + customerPaidValue;

            // Verifica se o valor restante é negativo
            if (remainingValue < 0) {
                resultDiv.innerHTML = '<span class="text-red-400 text-lg md:text-xl font-bold">A soma das entradas não pode ser maior que o valor financiado.</span>';
                return;
            }

            // Formata o resultado para moeda brasileira (BRL), que usa a vírgula como separador decimal.
            const formattedResult = new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL',
            }).format(remainingValue);

            // Cria e adiciona o texto e o valor em elementos separados
            const labelSpan = document.createElement('span');
            labelSpan.className = 'block text-lg md:text-xl font-bold text-gray-300';
            labelSpan.textContent = 'Vamos receber da Payjoy nessa venda:';
            
            const valueSpan = document.createElement('span');
            valueSpan.className = 'block text-2xl md:text-3xl font-bold text-yellow-300 mt-2';
            valueSpan.textContent = formattedResult;

            resultDiv.appendChild(labelSpan);
            resultDiv.appendChild(valueSpan);
        }

        // Função para limpar todos os campos e o resultado
        function clearInputs() {
            document.getElementById('financedValue').value = '';
            document.getElementById('downPayment').value = '';
            document.getElementById('customerPaidValue').value = '';
            document.getElementById('result').innerHTML = '';
        }
    </script>
</body>
</html>
